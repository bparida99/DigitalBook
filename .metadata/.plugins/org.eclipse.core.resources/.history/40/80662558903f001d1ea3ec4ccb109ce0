package com.cts.dbs.bo.impl;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.cts.dbs.bo.BooksOfUserBo;
import com.cts.dbs.dao.BooksOfUserDAO;
import com.cts.dbs.entity.BooksofUser;
import com.cts.dbs.exception.DigitalBooksException;

@Service
public class BooksOfUserBoImpl implements BooksOfUserBo{
	
	@Autowired
	private BooksOfUserDAO dao;

	@Override
	public BooksofUser addPurchase(BooksofUser booksofUser) {
		return dao.saveAndFlush(booksofUser);
	}

	@Override
	public BooksofUser updatePurchase(BooksofUser booksofUser) {
		findPurchaseByBookId(booksofUser.getBooking_id());
		return dao.saveAndFlush(booksofUser);
	}

	@Override
	public List<BooksofUser> findPurchaseByBookId(Long id) {
		return dao.findByBook_id(id);
	}

	@Override
	public List<BooksofUser> findPurchaseByUserId(Long id) {
		return dao.findByUser_id(id);
	}

	@Override
	public BooksofUser findPurchaseById(Long id) throws DigitalBooksException {
		BooksofUser bu= dao.findById(id).get();
		if(bu==null) {
			throw new DigitalBooksException("No purcase found with id:"+id);
		}
		return bu;
	}

}
