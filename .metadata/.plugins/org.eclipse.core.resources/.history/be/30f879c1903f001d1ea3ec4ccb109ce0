package com.cts.purchase.bo.impl;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.cts.dbs.bo.BooksOfUserBo;
import com.cts.dbs.dao.BooksOfUserDAO;
import com.cts.dbs.entity.BooksofUser;
import com.cts.dbs.exception.DigitalBooksException;
import com.cts.purchase.dao.PurchaseDao;
import com.cts.purchase.entity.Purchase;

@Service
public class BooksOfUserBoImpl implements BooksOfUserBo{
	
	@Autowired
	private PurchaseDao dao;

	@Override
	public Purchase addPurchase(Purchase booksofUser) {
		return dao.saveAndFlush(booksofUser);
	}

	@Override
	public Purchase updatePurchase(Purchase purchase) {
		findPurchaseByBookId(booksofUser.getBooking_id());
		return dao.saveAndFlush(booksofUser);
	}

	@Override
	public List<Purchase> findPurchaseByBookId(Long id) {
		return dao.findByBook_id(id);
	}

	@Override
	public List<Purchase> findPurchaseByUserId(Long id) {
		return dao.findByUser_id(id);
	}

	@Override
	public Purchase findPurchaseById(Long id) throws DigitalBooksException {
		Purchase bu= dao.findById(id).get();
		if(bu==null) {
			throw new DigitalBooksException("No purcase found with id:"+id);
		}
		return bu;
	}

}
